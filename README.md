## 知乎c题思路分析
平时很少在知乎写回答，但看了一些回答，担心很多参赛队伍会误入歧途……
本人拿过C题的O奖，也是数据挖掘领域的研究者，对今年这道C题还是挺亲切的，这里简单说一下几个我看到的误区和我认为比较可行的思路首先澄明一下几个误区：
第一，这道题不适合deep learning（包括任何的DNN, RNN等模型），因为数据量实在是太小了。
一个tsv文件里只有几百个商品的rating，随便一个深度网络都会过拟合。
而且这道题的几个问题都是以挖掘/分析数据并做决策为目的，而不是要做分类/回归，加上已知的原始特征也很少，因此深度模型并没有用武之地。
事实上，往年C题的数据量都没有达到深度学习要求的数据量，数据特点也不适合深度学习。

给大家一个参考，一般推荐系统能用神经协同过滤方法的常规数据量也需要至少几千个商品，总共十万甚至百万级的rating第二，这道题不是推荐系统的问题，虽然数据场景是取自Amazon推荐系统，而且有商品的用户rating，但是问题主要是围绕分析商品的市场用户反馈以帮助公司更好决策，而不是要为用户推荐商品。因此不必太注重考虑推荐的方法，比如协同过滤/矩阵分解挖掘用户兴趣和商品特征，这些还是和题目有些距离的第三，没有必要过于纠结NLP和情感分析，这不是题目的重点。虽然数据中给了review text同时题目也有要求分析review和rating的关系，但终究还是非常常规的NLP任务，完全没有到需要词向量嵌入再训练一个大模型的地步。会Python的同学可以直接掉包先文本分词，再用情感词典计算情感得分就行。如果实在想用深度学习而且有配置好了tensorflow/pytorch，可以去github上找一个别人训好的情感分类的网络，再拿过来预测一下情感得分即可。但我的建议依旧是前者，因为现有的情感分类模型多是-1/0/1三分类，而无法给出更细致的分数，相反，手动用情感词典计算情感得分可以给出更细致的分数，例如0~10的得分，这样留有更多信息（本来数据集中特征信息就很少……）此外，此题的关键还是第二题的bcd三个问题，应该也是最能拉开差距的。这三个问题都有常规的思路方法，套用很大众化的数学模型也能达到目的，但是这样就最多止步H奖。比如b问要考虑time pattern，最常规的是直接用最简单的time series model，当然也可以用某种基于evolution/diffusion的微分方程。我能想到的比较fancy的做法是用stochastic point process（尤其是hawkes process），把rating视为stochastic event，当然不了解point process model或者快速学习能力一般的同学还是建议绕道用简单一点的模型吧c问就是选特征，最基本的思路是相关性分析，进一步的思路是从机器学习的特征选择角度来考虑，更高阶一点是从信息论的角度考虑最大化特征和目标变量的mutual information。这一问的拉分之处应该是能不能把问题建模成一个well-defined的优化问题，而不是只是用一些启发式的方法计算几个score来比较d问应该是数模竞赛很常见的问题了，分析两个变量之间的关联性。最常规的做法就是计算一下相关系数，或者最多用一些关联分析算法。但其实事实上，从研究者的角度，这样的做法得出的结论是有问题的。因为这个问题是要分析两个变量之间是否具有因果关系，而不是简单的相关关系。有相关关系不一定有因果关系，比如一个班上的学生发现物理分数高的学生跑步更快，但是并不能得出结论物理学得好引起了运动神经更发达，这是因为还是第三个confounder在起作用，也就是性别，恰恰是因为男生更倾向于物理学得更好而且跑得更快，因此才有了数据中的这一相关性，真正的因果关系是性别/基因影响了理科学习能力和运动神经发育这两个变量。所以这道题也一样，问A会不会影响B，那么这时就需要考虑是不是存在第三个confounder会同时作用于这两个变量。这就引出了causal inference的方法，这里不加赘述，大家可以去wiki上了解一下或者google相关的文献。当然这个思路相对数模竞赛来讲还是有点高阶了，稍有不慎如果对概念理解不到位很容易用错场景，同时在写论文上也需要更多篇幅来argue清楚motivation，建议大家在时间充裕的情况下再考虑causality吧，不然就用相关性分析也无伤大雅总之，美赛C题是数据挖掘题，所谓数据挖掘，就是基于数据做分析和规律探索，得出隐藏在数据中的insight，最后帮助做决策。所以，最最重要的是紧紧围绕题目要求，对数据进行探索，给出一个切合题意、符合客观规律、有效的数学模型。能不能按题目要求，给出令人信服的data insight，就是评判高下的关键。同时C题因为兼具了开放性和技术性的特点，也是6道题目中最需要技术创新的题目，所以模型的创新性和合理性同样是影响成绩的是重中之重最后，希望大家在比赛过程中也能学会一些新的模型和算法，掌握新的技能和本领，磨练学术论文的写作方法，锻炼解决实际问题的能力，而不是仅仅套用几个现成的模型，吊几个包，画几张花哨的结果图我再补充一些说明作为回复大家的问题吧。当然按照比赛的进程，现阶段应该主要是结果实现和可视化，以及论文写作了，不建议还去大改模型思路了。我说的也只是作为一种参考，能保证大方向正确，但不能保证一定拿O/F（这个本身也要靠一些运气）首先，我认为第二问里a和c是有关联的，b和d也是有关联的，下面详细说一下。a问就是要根据数据集中已有的信息，自己定义一些指标，作为对商品的市场评价。可以是一些简单的平均rating，平均review情感得分等；也可以是较复杂的一些综合计算指标。除了自己定义之外，也可以检索一些相关资料看看这个领域的研究或是业界用了那些指标。这种定指标的题在数模竞赛中很常见，只要说得过去就行，大致的原则是要满足全面性（利用所有信息）、独立性（两两之间尽可能包含不同信息）、可量化性，我觉得就可以了。为了更全面的考虑，一般可以从不同角度来思考，比如整体和局部的衡量，静态和动态（变化率）的衡量，平均值和方差，绝对量和相对量……接下来的c问是要把a里面定义的几个指标融合成一个“总指标”或挑选出一组有用的指标，用于作为最能判断商品口碑的indicator。理论上，不管是一个“总指标”还是一组指标，都是要最大化他们和商品口碑变量的关联性。所以这里我觉得有两个思路，如果考虑合并指标，可以参数化权重，然后转化为一个优化问题；另一种是挑选一组指标，那可以先用一个分类/回归模型，x是a问里的指标，y是商品口碑的变量（比如可以定义为好/坏的0-1变量或是评论量这种连续变量），从而得到y=f(x)，f是选用的分类/回归器，在此基础上就可以用feature selection了，也就是挑选出一组最少的x里面包含了最大的y的信息b和d两问都需要用到时间信息，所以我觉得可以基于一个模型，也就是某种分析序列的模型来做。这里我再详细解释一下之前写的思路，这个问题的一个角度是可以看作商品在人群中的信息传播来分析的。一个商品从引入市场开始，就会不断有用户的购买/评论行为，影响这些行为的有商品本身的流行度、商品质量、其他用户的评价等等。因为我做过信息传播的研究对这个领域还比较了解的，常见方法（按研究热点的时间顺序）有时间序列/演化模型，事件序列/随机点过程模型，还有state-of-the-art的各种深度序列模型。这也恰好对应这一领域从一开始人工数pattern，到后来的统计机器学习方法，再到最后深度学习一统天下的过渡。但是从本题而言，考虑到数据量不允许深度学习，用基于统计学习的点过程模型我认为是最好的，比用最古老的演化模型有新意，最大的好处是点过程模型本身属于概率/贝叶斯框架下因此可以建模不确定性给出置信区间，这是其他模型无法覆盖的针对一个商品，一般的point process模型是把每个新的评论当作一个事件，然后定义一个intensity function描述单位时间内下一个评论达到的概率。这个intensity function非常有用，它可以直接衡量任意时刻商品的流行度（口碑），而不同形式下的point process定义的intensity function也具有不同形式。比如最简单的poisson process，就是intensity function始终保持一个不变值lambda（泊松过程的到达率），它无法建模历史信息对当前状态的影响。而比较贴合这个问题的是hawkes process，因为它对应的intensity function是对历史事件对当前时刻影响的加和，从而建模了一个self-excited process（自激励过程），这是商品在推广过程中普遍存在的物理现象，即"richer get richer"。关于hawkes process model的定义/推导/训练/预测可以参考这篇tutorialhttps://arxiv.org/abs/1708.06401当然就这道题光考虑self-excited process是不够的，因为商品的历史评论不仅会有促进作用，还会有削弱作用（差评），因此伴随的还有self-corrected process（hawkes process的变种，即历史事件削弱当前intensity）。看懂了hawkes process模型要对其进行变种是很容易的，只要改一下intensity function的定义，比如加一些项或者参数。具体的可以把数据中其他信息review/review的评论当作一个事件的特征，然后引入这个intensity function去。而整个模型的训练/预测都是不变的。当然如果比赛结束有兴趣进一步了解point process及其作为state-of-the-art的结合RNN/attention/GAN/imitation learning/GNN的各种变种可以看看这篇较新的综述http://thinklab.sjtu.edu.cn/src/pp_survey.pdf另外去年KDD和IJCAI都有temporal point process的tutorial，去年NIPS也有TPP专门的workshop好不容易讲完point process……再说说d问。之前之所以提到因果关系是因为我在之前的数模竞赛中经常遇到问A是否会影响B这种问题，我所见到的和实战所用过的解答都是关联分析的方法，从来没人考虑过因果分析，我认为这是在这类题目上突破创新瓶颈的一个角度。要确定A和B之间是否存在casual relation关键是用intervention方法，也就是控制住A保持其他所有的confounder不变这时看B是否会变化（有点类似控制变量法）。但这在实际情况中很难做到这一点（很难控制与A相关的变量都保持不变），通常需要做实验重新收集数据才能得到准确的结论，基于observational data的方法一般都是近似这种分析。b问用任何的序列模型都应该可以近似做intervention的，比如可以考虑去掉一些历史的评论，把改动后的序列输入训好的模型看未来的序列会不会发生显著变化。当然这个严格来说也可能不是intervention了，因为去掉评论的同时也会改变其他一些有关联的变量还有队伍在纠结NLP情感分析的时候具体用什么方法，我的建议的，如果感觉都说得通而且侧重点不同，可以结合两个方法/模型，这也是创新性的一种最后，对我来说，建模的最大乐趣也是拿好奖的经验，是要从题目的意图出发，尽可能少做假设多考虑可能的因素，然后去借用/嫁接/组合/设计一个既有新意又合理的模型；而不是从自己熟悉的模型方法出发，然后对题目的场景做一堆生硬的假设甚至变形，再把模型套在题目上祝大家都能取得好成绩~
